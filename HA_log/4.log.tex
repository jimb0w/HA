. sort id diag1
{\smallskip}
. list id DM if id == 5 | id == 6, separator(0)
{\smallskip}
      {\TLC}\HLI{9}{\TRC}
      {\VBAR} id   DM {\VBAR}
      {\LFTT}\HLI{9}{\RGTT}
  39. {\VBAR}  5    . {\VBAR}
  40. {\VBAR}  5    . {\VBAR}
  41. {\VBAR}  5    . {\VBAR}
  42. {\VBAR}  5    . {\VBAR}
  43. {\VBAR}  5    . {\VBAR}
  44. {\VBAR}  5    . {\VBAR}
  45. {\VBAR}  5    . {\VBAR}
  46. {\VBAR}  5    . {\VBAR}
  47. {\VBAR}  5    . {\VBAR}
  48. {\VBAR}  5    . {\VBAR}
  49. {\VBAR}  5    . {\VBAR}
  50. {\VBAR}  5    . {\VBAR}
  51. {\VBAR}  5    . {\VBAR}
  52. {\VBAR}  5    . {\VBAR}
  53. {\VBAR}  6    . {\VBAR}
  54. {\VBAR}  6    . {\VBAR}
  55. {\VBAR}  6    . {\VBAR}
  56. {\VBAR}  6    . {\VBAR}
  57. {\VBAR}  6    . {\VBAR}
  58. {\VBAR}  6    . {\VBAR}
  59. {\VBAR}  6    1 {\VBAR}
  60. {\VBAR}  6    . {\VBAR}
  61. {\VBAR}  6    . {\VBAR}
  62. {\VBAR}  6    . {\VBAR}
      {\BLC}\HLI{9}{\BRC}
{\smallskip}
. *Person 6 has an admission with diabetes. 
. bysort id (diag1) : egen DMP = min(DM)
(858 missing values generated)
{\smallskip}
. *Stata treats missing values as infinity, so the minimum function works here
. list id DM DMP if id == 5 | id == 6, separator(0)
{\smallskip}
      {\TLC}\HLI{15}{\TRC}
      {\VBAR} id   DM   DMP {\VBAR}
      {\LFTT}\HLI{15}{\RGTT}
  39. {\VBAR}  5    .     . {\VBAR}
  40. {\VBAR}  5    .     . {\VBAR}
  41. {\VBAR}  5    .     . {\VBAR}
  42. {\VBAR}  5    .     . {\VBAR}
  43. {\VBAR}  5    .     . {\VBAR}
  44. {\VBAR}  5    .     . {\VBAR}
  45. {\VBAR}  5    .     . {\VBAR}
  46. {\VBAR}  5    .     . {\VBAR}
  47. {\VBAR}  5    .     . {\VBAR}
  48. {\VBAR}  5    .     . {\VBAR}
  49. {\VBAR}  5    .     . {\VBAR}
  50. {\VBAR}  5    .     . {\VBAR}
  51. {\VBAR}  5    .     . {\VBAR}
  52. {\VBAR}  5    .     . {\VBAR}
  53. {\VBAR}  6    .     1 {\VBAR}
  54. {\VBAR}  6    .     1 {\VBAR}
  55. {\VBAR}  6    .     1 {\VBAR}
  56. {\VBAR}  6    .     1 {\VBAR}
  57. {\VBAR}  6    .     1 {\VBAR}
  58. {\VBAR}  6    .     1 {\VBAR}
  59. {\VBAR}  6    1     1 {\VBAR}
  60. {\VBAR}  6    .     1 {\VBAR}
  61. {\VBAR}  6    .     1 {\VBAR}
  62. {\VBAR}  6    .     1 {\VBAR}
      {\BLC}\HLI{15}{\BRC}
{\smallskip}
. keep if DMP == 1
(858 observations deleted)
{\smallskip}
. list id DM DMP if id == 5 | id == 6, separator(0)
{\smallskip}
     {\TLC}\HLI{15}{\TRC}
     {\VBAR} id   DM   DMP {\VBAR}
     {\LFTT}\HLI{15}{\RGTT}
  1. {\VBAR}  6    .     1 {\VBAR}
  2. {\VBAR}  6    .     1 {\VBAR}
  3. {\VBAR}  6    .     1 {\VBAR}
  4. {\VBAR}  6    .     1 {\VBAR}
  5. {\VBAR}  6    .     1 {\VBAR}
  6. {\VBAR}  6    .     1 {\VBAR}
  7. {\VBAR}  6    1     1 {\VBAR}
  8. {\VBAR}  6    .     1 {\VBAR}
  9. {\VBAR}  6    .     1 {\VBAR}
 10. {\VBAR}  6    .     1 {\VBAR}
     {\BLC}\HLI{15}{\BRC}
{\smallskip}
