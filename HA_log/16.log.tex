. gen epist = date(epistart,"DMY")
(57,149 missing values generated)
{\smallskip}
. gen epien = date(epiend,"DMY")
(57,446 missing values generated)
{\smallskip}
. format epist epien \%td
{\smallskip}
. *Check missing values and replace with admission and discharge dates if necesary
. count if epist==.
  57,149
{\smallskip}
. count if epist==. \& admidate==""
  42
{\smallskip}
. replace epist = date(admidate,"DMY") if epist==.
(57,107 real changes made)
{\smallskip}
. drop if epist==.
(42 observations deleted)
{\smallskip}
. count if epien==.
  57,404
{\smallskip}
. count if epien==. \& disdate==""
  314
{\smallskip}
. replace epien = date(disdate,"DMY") if epien==.
(57,090 real changes made)
{\smallskip}
. replace epien = epist if epien==.
(314 real changes made)
{\smallskip}
. *Check distributions
. hist epist if MI == 1, color(black) graphregion(color(white)) ///
> frequency xtitle("Date") bin(500)
(bin=500, start=12906, width=20.086)
{\smallskip}
. hist epien if MI == 1, color(black) graphregion(color(white)) ///
> frequency xtitle("Date") bin(500)
(bin=500, start=12912, width=20.074)
{\smallskip}
. hist epist, color(black) graphregion(color(white)) ///
> frequency xtitle("Date") bin(500)
(bin=500, start=7641, width=30.616)
{\smallskip}
. hist epien, color(black) graphregion(color(white)) ///
> frequency xtitle("Date") bin(500)
(bin=500, start=7671, width=30.556)
{\smallskip}
. gen admmode = 1
{\smallskip}
. replace admmode = 0 if inrange(admisorc,1000,2002) | inrange(admisorc,4000,4001) ///
>  | inrange(admisorc,7000,7003) | (admisorc >= 10000 \& admisorc!=11000)
(4,046,768 real changes made)
{\smallskip}
. ta admmode
{\smallskip}
    admmode {\VBAR}      Freq.     Percent        Cum.
\HLI{12}{\PLUS}\HLI{35}
          0 {\VBAR}  4,046,768       96.91       96.91
          1 {\VBAR}    129,168        3.09      100.00
\HLI{12}{\PLUS}\HLI{35}
      Total {\VBAR}  4,175,936      100.00
{\smallskip}
. *The vast majority are from home
. gen sepmode = 1
{\smallskip}
. replace sepmode = 0 if inrange(disdest,1000,2002) | inrange(disdest,4000,4001) ///
>  | inrange(disdest,7000,7003) | (disdest >= 10000 \& disdest!=11000)
(3,765,066 real changes made)
{\smallskip}
. replace sepmode = 2 if disdest==11001
(19,565 real changes made)
{\smallskip}
. ta sepmode
{\smallskip}
    sepmode {\VBAR}      Freq.     Percent        Cum.
\HLI{12}{\PLUS}\HLI{35}
          0 {\VBAR}  3,745,501       89.69       89.69
          1 {\VBAR}    410,870        9.84       99.53
          2 {\VBAR}     19,565        0.47      100.00
\HLI{12}{\PLUS}\HLI{35}
      Total {\VBAR}  4,175,936      100.00
{\smallskip}
. *Again, the vast majority discharge home
